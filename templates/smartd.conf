# Managed by Puppet -- do not edit!
DEFAULT -m <%= @mail_to %> -M <%= @warning_schedule %>
<% @devices.each do |device| -%>
<%= device -%>
<% if @device_opts.has_key?(device) -%>
<%= @device_opts[device] -%>
<% end #newline here, please %>
<% end -%>
<% megaraid_adapters = scope.lookupvar('::megaraid_adapters')
megaraid_device = scope.lookupvar('::megaraid_virtual_drives')
megaraid_drives = scope.lookupvar('::megaraid_physical_drives')
megaraid_device = megaraid_device == :undefined ? "" : megaraid_device.split(/,/)[0]
megaraid_drives = megaraid_drives == :undefined ? [] : megaraid_drives.split(/,/)

if megaraid_device and megaraid_device != '' and
     megaraid_adapters and megaraid_adapters.to_i > 0 -%>
<% megaraid_drives.each do |drive| -%>
<%= megaraid_device %> -d sat+megaraid,<%= drive.to_i %>
<% if @device_opts.has_key?('megaraid') -%>
 <%= @device_opts['megaraid'] -%>
<% end #newline here, please %>
<% end -%>
<% end -%>
<% if @devicescan -%>
DEVICESCAN <% if @devicescan_options %><%= @devicescan_options %><% end %>
<% end -%>
